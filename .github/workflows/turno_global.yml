name: âš™ï¸ Turno Global do GitNations

# 1. Agendamento e Gatilhos: Roda diariamente e permite acionamento manual
on:
  schedule:
    # Roda todos os dias Ã  meia-noite UTC (Ajuste para seu fuso se necessÃ¡rio)
    - cron: '0 0 * * *' 
  workflow_dispatch:
    # Permite rodar manualmente a partir da aba Actions

jobs:
  run_game_turn:
    runs-on: ubuntu-latest

    permissions:
      contents: write # ESSENCIAL: Permite que o Action faÃ§a commit dos arquivos JSON atualizados

    steps:
      - name: ğŸ“¥ Checkout do RepositÃ³rio
        uses: actions/checkout@v4
        with:
          # Ã‰ preciso fazer um fetch do histÃ³rico completo para o commit funcionar
          fetch-depth: 0 

      - name: ğŸ”§ Configurar Node.js (v20)
        uses: actions/setup-node@v4
        with:
          node-version: 20

      - name: ğŸ“¦ Instalar DependÃªncias
        run: npm install # Se vocÃª tiver dependÃªncias no package.json

      - name: ğŸ® Executar o Motor de SimulaÃ§Ã£o
        run: node js/game.js

      - name: ğŸ’¾ Commit das EstatÃ­sticas Atualizadas
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: 'âš™ï¸ Turno Global: EstatÃ­sticas das NaÃ§Ãµes Atualizadas'
          # Adiciona apenas os arquivos JSON alterados
          files: nations/*.json
          # ConfiguraÃ§Ã£o para o bot de commit
          commit_user_name: GitNations Bot
          commit_user_email: actions@github.com
